<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/templates/issueTrackerMasterLayout.xhtml">
	<!-- Ha külön oldalon lesz egy ticket history-ja. -->
	<ui:define name="customTitle">IssuTracker - #{mes.ticket_history}</ui:define>

	<ui:define name="customHead">

	</ui:define>

	<ui:define name="customBody">
		<h:form id="onetickethistory">
			<div class="container">
				<div class="panel panel-default">
					<div class="panel-heading">
						<h3>#{mes.ticket_history}</h3>
					</div>
					
					<p:messages id="messages" showDetail="true" autoUpdate="true" closable="true" />
<!-- Ez a rész csak nekem kellett, hogy tudjam tesztelni külön és ne kelljen a ticketdetailst piszkálnom. Mivel nem lesz külön felületen, -->
<!-- ezért erre akkor nem is lesz szükség.					 -->
					<div class="panel-body">
						<div class="panel panel-default">
							<div class="panel-heading">#{mes.search}</div>
							<div class="panel-body">
								<div class="row">
									<div class="col-md-2">
										<h:outputLabel for="ticketid"
											value="#{mes.ticket_history_search}" />
									</div>
									<div class="col-md-10">
										<p:inputText value="#{searchTicketHistoryView.id}"
											id="ticketid" />
									</div>
								</div>
								<div class="row">
									<div class="col-md-10 col-md-offset-2">
										<p:commandButton action="#{ticketHistoryView.init()}"
											value="#{mes.ticket_history_choose}"
											update="onetickethistory" />
									</div>
								</div>
							</div>
						</div>
<!-- Ez listázza ki a TicketVo history mezőjében lévő adatok alapján a szöveget, ami a TicketHistoryView-ban van összevágva. Lehet egy kicsit bonyolultan van -->
<!-- megoldva, de a dátum miatt. Így irattam ki a dátumot, aminek nyelvválasztás esetén választás esetén változik a formátuma. Ami nem változik a bundle-lel  -->
<!-- meghatározott szöveg. A TicketHistoryView-ból jön és nyelvválasztásnál még nem változik.  -->
						<div class="panel panel-default">
							<div class="panel-body">
								<p:dataScroller value="#{ticketHistoryView.historyList}" var="history" chunkSize="10">
							        <f:facet name="header">
							            #{mes.ticket_history}
							        </f:facet>
							        <h:panelGrid columns="2" style="width:100%">
							            <p:outputPanel>
							                <h:panelGrid columns="2" cellpadding="5">
							                    <h:outputText value="#{history.change}" style="font-weight: bold"/> 
							                    <h:outputText value="#{history.recDate}"> 
										            <f:convertDateTime  timeStyle="short" type="both" dateStyle="full"/>
										        </h:outputText>
							                </h:panelGrid>
							            </p:outputPanel>
							        </h:panelGrid>
							    </p:dataScroller>
							
							</div>
						
						</div>
<!-- Ez a rész is a HistoryVo ticket mezőjén alapul, de ha nincs rá szükség akkor vegyétek ki. -->
<!-- 						<div class="panel panel-default"> -->
<!-- 						<div class="panel-body"> -->
<!-- 							<p:dataTable var="history" value="#{ticketHistoryView.ticketHistory.history}" -->
<!-- 								 emptyMessage="#{mes.notfound}" > -->
<!-- 								<p:column headerText="#{mes.ticket_history_modstatus}">  -->
<!-- 									<h:outputText  value="#{history.modStatus}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.id}">  -->
<!-- 									<h:outputText  value="#{history.ticket.id}" /> -->
<!-- 								</p:column> -->

<!-- 								<p:column headerText="#{mes.title}"> -->
<!-- 									<h:outputText value="#{history.ticket.title}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.type}"> -->
<!-- 									<h:outputText value="#{history.ticket.type.name}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.status}"> -->
<!-- 									<h:outputText value="#{history.ticket.currentStatus.name}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.description}"> -->
<!-- 									<h:outputText value="#{history.ticket.description}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.clientmail}">  -->
<!-- 									<h:outputText value="#{history.ticket.clientMail}" />  -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.ticket_history_mod_user}"> -->
<!-- 									<h:outputText value="#{history.ticket.modUserName != null ? history.ticket.modUserName : history.ticket.recUserName}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.ticket_history_comments_number}"> -->
<!-- 									<h:outputText value="#{history.ticket.comments.size()}" /> -->
<!-- 								</p:column> -->
<!-- 								<p:column headerText="#{mes.ticket_history_last_modify_date}"> -->
<!-- 									<h:outputText value="#{history.ticket.modDate != null ? history.ticket.modDate : history.ticket.recDate}" /> -->
<!-- 								</p:column> -->
								
<!-- 							</p:dataTable> -->
							
<!-- 							</div> -->
<!-- 						</div> -->
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>
