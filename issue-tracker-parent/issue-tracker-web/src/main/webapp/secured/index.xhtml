<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/templates/issueTrackerMasterLayout.xhtml"
>

    <ui:define name="pageTitle">IssueTracker</ui:define>

    <ui:define name="customHead">
        <h:outputStylesheet library="css" name="secureindex.css"></h:outputStylesheet>
    </ui:define>

    <ui:define name="customBody">

        <div class="container">
            <div class="panel panel-default" id="mainpanel">
                <div class="panel-heading">
                    <h3>#{mes.index}</h3>
                </div>
                <div class="panel-body">

                    <div class="panel panel-default">
                        <div class="panel-heading">
                            #{mes.burndownchart}
                        </div>
                        <div class="panel-body">
                            <p:chart styleClass="col-md-10 col-md-offset-1" type="line"
                                     model="#{burndownChartView.lineChart}" style="height:300px;"
                                     rendered="#{burndownChartView.companyId != null and userSessionBean.manager}"/>
                        </div>
                    </div>

                    <p:chart styleClass="col-md-5 col-md-offset-1" type="pie" model="#{ticketsByStatusView.chart}"
                             style="width:400px;height:300px"
                             rendered="#{ticketsByStatusView.chart.data.keySet().size() != 0 and userSessionBean.user}"/>

                    <h:form id="typeselect">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                #{mes.typesbystatus_chart_title}
                            </div>
                            <div class="panel-body">
                                <p:panelGrid rendered="#{userSessionBean.manager}"
                                             styleClass="col-md-10 col-md-offset-1 StatusesByTypeGrid">
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="Select a type to view the number of the tickets in that type!"/><br/>
                                            <p:selectOneMenu id="type" value="#{statusesByTypeView.typeId}"
                                                             style="width:150px">
                                                <f:selectItem itemLabel="#{mes.ticketcreate_selectone}"
                                                              itemValue=""/>
                                                <f:selectItems value="#{statusesByTypeView.allTypes}" var="type"
                                                               itemLabel="#{type.name}" itemValue="#{type.id}"/>
                                            </p:selectOneMenu><br/>
                                            <p:commandButton value="#{mes.ticket_history_choose}"
                                                             action="#{statusesByTypeView.renderChart}"
                                                             update="typeselect"
                                                             style="margin-top: 3px;"/>
                                        </p:column>
                                        <p:column rowspan="1">
                                            <p:chart type="pie" model="#{statusesByTypeView.chart}"
                                                     style="width:400px;height:300px;"
                                                     rendered="#{statusesByTypeView.typeId != null}"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </div>
                        </div>
                    </h:form>


                </div>
            </div>
        </div>
    </ui:define>
</ui:composition>